{"version":3,"file":"js/771.95db02d3.js","mappings":"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","sources":["webpack://new-project/./src/views/backEnd/CouponView.vue","webpack://new-project/./src/components/CouponView.vue","webpack://new-project/./src/components/CouponView.vue?3c9e","webpack://new-project/./src/views/backEnd/CouponView.vue?16cb"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"btn btn-primary\" data-toggle=\"modal\"\r\n        @click=\"showModal()\" >建立新的優惠卷\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <!-- CSS直接套用bs 但如果想自訂 也可直接修改 -->\r\n          <th width=\"130\">名稱</th>\r\n          <th width=\"100\">代碼</th>\r\n          <th width=\"150\">到期日</th>\r\n          <th width=\"100\">折扣百分比</th>\r\n          <th width=\"120\">是否啟用</th>\r\n          <th width=\"80\">編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <!--  v-for=\"(item) in coupons\" :key=\"item.id\" -->\r\n        <tr v-for=\"(item) in coupons\" :key=\"item.id\">\r\n          <td>{{ item.title }}</td>\r\n          <td>{{ item.code }}</td>\r\n          <td>\r\n            {{ item.due_date }}\r\n          </td>\r\n          <td>\r\n            {{ item.percent}}\r\n          </td>\r\n          <td>\r\n            <!-- 產品如果為啟用 is_enabled == 1 -->\r\n            <span v-if=\"item.is_enabled\" class=\"text-success\">啟用</span>\r\n            <span v-else>未啟用</span>\r\n          </td>\r\n          <td>\r\n            <button class=\"btn btn-outline-primary btn-sm\"\r\n              @click=\"showModal(item)\">編輯</button>\r\n            <button class=\"btn btn-outline-primary btn-sm\"\r\n              @click=\"showDeleteModal(item)\">刪除</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <PagesView :pages=\"pagination\" @emit-pages=\"getCoupons\"></PagesView>\r\n    <!-- modal -->\r\n    <div\r\n      class=\"modal fade\"\r\n      id=\"productModal\"\r\n      tabindex=\"-1\"\r\n      role=\"dialog\"\r\n      aria-labelledby=\"exampleModalLabel\"\r\n      aria-hidden=\"true\"\r\n      ref=\"couponModal\"\r\n    >\r\n      <CouponModal\r\n        :loading=\"loading\"\r\n        :coupon=\"coupon\"\r\n        :isedit=\"isEdit\"\r\n        @create-coupon=\"createCoupon\"\r\n        @edit-coupon=\"editCoupon\"\r\n      ></CouponModal>\r\n    </div>\r\n    <!-- 刪除產品 Modal -->\r\n    <div id=\"delProductModal\" ref=\"delModal\" class=\"modal fade\" tabindex=\"-1\"\r\n      aria-labelledby=\"delProductModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content border-0\">\r\n          <div class=\"modal-header bg-danger text-white\">\r\n            <h5 id=\"delProductModalLabel\" class=\"modal-title\">\r\n              <span>刪除產品</span>\r\n            </h5>\r\n            <button type=\"button\" class=\"btn-close\" aria-label=\"Close\"\r\n              @click=\"hideModal\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            是否刪除\r\n            <strong v-if=\"this.coupon\" class=\"text-danger\">\r\n              {{ this.coupon.title }}\r\n            </strong> 商品(刪除後將無法恢復)。\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button v-if=\"!loading\" type=\"button\" class=\"btn btn-outline-secondary\"\r\n              @click=\"hideModal\">\r\n              取消\r\n            </button>\r\n            <button v-if=\"!loading\" type=\"button\" class=\"btn btn-danger\"\r\n              @click=\"deletecoupon()\">\r\n              確認刪除\r\n            </button>\r\n            <div v-if=\"loading\" class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal';\r\nimport PagesView from '../../components/PagesView.vue';\r\nimport CouponModal from '../../components/CouponView.vue';\r\n\r\nexport default {\r\n  components: {\r\n    PagesView,\r\n    CouponModal,\r\n  },\r\n  data() {\r\n    return {\r\n      // table\r\n      loading: false,\r\n      isEdit: false,\r\n      data: 'data',\r\n      coupons: null,\r\n      coupon: null,\r\n      couponModal: null,\r\n      deleteModal: null,\r\n      products: [], // 取得所有產品資料\r\n      pagination: {}, // 分頁\r\n    };\r\n  },\r\n  methods: {\r\n    getCoupons(page = 1) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons?page=${page}`;\r\n      this.axios.get(url)\r\n        .then((response) => {\r\n          console.log(response, 'getCoupons');\r\n          this.coupons = response.data.coupons;\r\n          this.pagination = response.data.pagination;\r\n          this.loading = false;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err, 'err');\r\n        });\r\n    },\r\n    createCoupon(item) {\r\n      const data = {\r\n        data: item,\r\n      };\r\n      this.loading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\r\n      this.axios.post(url, data)\r\n        .then((response) => {\r\n          console.log(response, 'createCoupon');\r\n          this.getCoupons();\r\n          this.couponModal.hide();\r\n          alert('新增完成');\r\n        })\r\n        .catch((err) => {\r\n          alert('上傳失敗');\r\n          console.log(err, 'err');\r\n        });\r\n    },\r\n    editCoupon(item) {\r\n      const data = {\r\n        data: item,\r\n      };\r\n      this.loading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${item.id}`;\r\n      this.axios.put(url, data)\r\n        .then((response) => {\r\n          console.log(response, 'editCoupon');\r\n          this.getCoupons();\r\n          this.couponModal.hide();\r\n          alert('編輯完成');\r\n        })\r\n        .catch((err) => {\r\n          alert('編輯失敗');\r\n          console.log(err, 'err');\r\n        });\r\n    },\r\n    showModal(clickCoupon) {\r\n      if (clickCoupon) {\r\n        this.isEdit = true;\r\n        this.coupon = JSON.parse(JSON.stringify(clickCoupon));\r\n      } else {\r\n        this.isEdit = false;\r\n        this.coupon = {};\r\n      }\r\n      this.couponModal.show();\r\n    },\r\n    showDeleteModal(clickCoupon) {\r\n      this.coupon = clickCoupon;\r\n      this.deleteModal.show();\r\n    },\r\n    hideModal() {\r\n      this.deleteModal.hide();\r\n    },\r\n    deletecoupon() {\r\n      this.loading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.coupon.id}`;\r\n      console.log(url);\r\n      this.axios.delete(url)\r\n        .then((response) => {\r\n          console.log(response, 'delete');\r\n          alert('成功刪除');\r\n          this.hideModal();\r\n          this.getCoupons();\r\n        })\r\n        .catch((error) => {\r\n          console.log(error, 'daltet');\r\n        });\r\n    },\r\n    signinCheck() {\r\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\r\n      this.axios.defaults.headers.common.Authorization = token;\r\n      this.loading = true;\r\n      this.axios.post(` ${process.env.VUE_APP_API}/api/user/check`)\r\n        .then((response) => {\r\n          console.log(response);\r\n          this.getCoupons();\r\n        })\r\n        .catch(() => {\r\n          this.$router.push('/login');\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.signinCheck();\r\n    this.deleteModal = new Modal(this.$refs.delModal);\r\n    this.couponModal = new Modal(this.$refs.couponModal);\r\n    console.log(this.data);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","<template>\r\n  <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n    <div class=\"modal-content border-0\">\r\n      <div class=\"modal-header bg-dark text-white\">\r\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n          <span>優惠卷</span>\r\n        </h5>\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn-close\"\r\n          data-bs-dismiss=\"modal\"\r\n          aria-label=\"Close\"\r\n        ></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"row justify-content-center\">\r\n          <div class=\"col-sm-8\">\r\n            <div class=\"form-group mb-3\">\r\n              <label for=\"title\">標題</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"title\"\r\n                v-model=\"propsCoupon.title\"\r\n                placeholder=\"請輸入標題\">\r\n            </div>\r\n            <div class=\"form-row\">\r\n              <div class=\"form-group mb-3\">\r\n                <label for=\"due_date\">日期</label>\r\n                <input type=\"date\" class=\"form-control\" id=\"due_date\"\r\n                  v-model=\"due_date\"\r\n                  placeholder=\"請輸入日期\">\r\n              </div>\r\n              <div class=\"form-group mb-3\">\r\n                <label for=\"price\">代碼</label>\r\n                <input type=\"unit\" class=\"form-control\" id=\"unit\"\r\n                  v-model=\"propsCoupon.code\"\r\n                  placeholder=\"請輸入代碼\">\r\n              </div>\r\n            </div>\r\n              <div class=\"form-row\">\r\n                <div class=\"form-group mb-5\">\r\n                <label for=\"origin_price\">折抵百分比</label>\r\n                  <input type=\"number\" class=\"form-control\" id=\"origin_price\"\r\n                    v-model=\"propsCoupon.percent\"\r\n                    placeholder=\"請輸入折抵百分比\">\r\n                </div>\r\n              </div>\r\n              <hr>\r\n            <div class=\"form-group\">\r\n              <div class=\"form-check\">\r\n                <input class=\"form-check-input\" type=\"checkbox\"\r\n                  v-model=\"propsCoupon.is_enabled\"\r\n                  :true-value=\"1\"\r\n                  :false-value=\"0\"\r\n                  id=\"is_enabled\">\r\n                <label class=\"form-check-label\" for=\"is_enabled\">\r\n                是否啟用\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button v-if=\"!loading\" type=\"button\" class=\"btn btn-outline-secondary\"\r\n          data-bs-dismiss=\"modal\">取消</button>\r\n        <button v-if=\"!isedit && !loading\" type=\"button\" class=\"btn btn-primary\"\r\n          @click=\"createCoupon()\">確認新增</button>\r\n        <button v-if=\"isedit && !loading\" type=\"button\" class=\"btn btn-primary\"\r\n          @click=\"editCoupon()\">確認編輯</button>\r\n        <div v-if=\"loading\" class=\"spinner-border text-primary\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nexport default {\r\n  props: {\r\n    coupon: {\r\n      type: Object,\r\n      default() { return {}; },\r\n    },\r\n    isedit: {\r\n      type: Boolean,\r\n      default() { return false; },\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default() { return false; },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      propsCoupon: {},\r\n      due_date: null,\r\n    };\r\n  },\r\n  emits: ['create-coupon', 'isedit', 'edit-coupon'],\r\n  methods: {\r\n    createCoupon() {\r\n      this.propsCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\r\n      if (!this.propsCoupon.is_enabled) {\r\n        this.propsCoupon.is_enabled = 0;\r\n      }\r\n      this.$emit('create-coupon', this.propsCoupon);\r\n    },\r\n    editCoupon() {\r\n      this.$emit('edit-coupon', this.propsCoupon);\r\n    },\r\n  },\r\n  watch: {\r\n    coupon() {\r\n      this.propsCoupon = this.coupon;\r\n      const date = new Date(this.coupon.due_date * 1000);\r\n      const year = date.getFullYear();\r\n      let month = date.getMonth() + 1; // 從0開始算一月的，所以要加一才會是正確的月份\r\n      let day = date.getDate();\r\n      // 如果是個位數就在前加 0\r\n      month = month.toString().length === 1 ? `0${month.toString()}` : month;\r\n      day = day.toString().length === 1 ? `0${day.toString()}` : day;\r\n      this.due_date = `${year}-${month}-${day}`;\r\n    },\r\n  },\r\n  mounted() {\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./CouponView.vue?vue&type=template&id=43d55030\"\nimport script from \"./CouponView.vue?vue&type=script&lang=js\"\nexport * from \"./CouponView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\2022 Vue 直播班\\\\新增資料夾 (3)\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CouponView.vue?vue&type=template&id=56532810\"\nimport script from \"./CouponView.vue?vue&type=script&lang=js\"\nexport * from \"./CouponView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\2022 Vue 直播班\\\\新增資料夾 (3)\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","id","tabindex","role","ref","_hoisted_21","_createElementBlock","onClick","$options","_hoisted_4","_Fragment","_renderList","$data","item","key","_toDisplayString","title","code","due_date","percent","is_enabled","_hoisted_6","_hoisted_7","_hoisted_8","_createVNode","_component_PagesView","pages","onEmitPages","_component_CouponModal","loading","coupon","isedit","onCreateCoupon","onEditCoupon","_hoisted_14","type","_hoisted_22","for","_hoisted_24","_hoisted_3","$event","placeholder","_hoisted_11","_hoisted_13","_hoisted_16","_hoisted_17","_hoisted_20","$props","_hoisted_25","props","Object","default","Boolean","data","propsCoupon","emits","methods","createCoupon","this","Math","floor","Date","$emit","editCoupon","watch","date","year","getFullYear","month","getMonth","day","getDate","toString","length","mounted","__exports__","components","PagesView","CouponModal","isEdit","coupons","couponModal","deleteModal","products","pagination","getCoupons","page","url","axios","get","then","response","console","log","catch","err","post","hide","alert","put","showModal","clickCoupon","JSON","parse","stringify","show","showDeleteModal","hideModal","deletecoupon","delete","error","signinCheck","token","document","cookie","replace","defaults","headers","common","Authorization","$router","push","Modal","$refs","delModal","render"],"sourceRoot":""}