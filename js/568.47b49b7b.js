"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[568],{9568:function(t,o,l){l.r(o),l.d(o,{default:function(){return J}});var s=l(6252),e=l(3577),a=l(9963);const i={class:"container"},c={class:"mt-4"},n={class:"table align-middle"},d=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"圖片"),(0,s._)("th",null,"商品名稱"),(0,s._)("th",null,"價格"),(0,s._)("th")])],-1),r={style:{width:"200px"}},u={class:"h6"},p={class:"h5"},h={class:"btn-group btn-group-sm"},g=["onClick"],_={key:0,class:"fas fa-spinner fa-pulse"},b=(0,s.Uk)(" 產品細項 "),m=["onClick"],y={key:0,class:"fas fa-spinner fa-pulse"},w=(0,s.Uk)(" 查看更多 "),v=["onClick"],k={key:0,class:"fas fa-spinner fa-pulse"},f=(0,s.Uk)(" 加到購物車 "),P={class:"modal",tabindex:"-1",id:"myModal",ref:"myModal"},x={class:"modal-dialog modal-xl",role:"document"},C={class:"modal-content border-0"},M={class:"modal-header bg-dark text-white"},q={class:"modal-title",id:"exampleModalLabel"},z=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},j={class:"row"},$={class:"col-sm-6"},U=["src"],V={class:"col-sm-6"},A={class:"badge bg-primary rounded-pill"},E={key:0,class:"h5"},I={key:1,class:"h6"},R={key:2,class:"h5"},Z={class:"input-group"},H=(0,s._)("label",{for:"number"},null,-1);function K(t,o,l,K,L,W){const Y=(0,s.up)("PagesView");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",c,[(0,s._)("table",n,[d,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.allProducts,((t,o)=>((0,s.wg)(),(0,s.iD)("tr",{key:o},[(0,s._)("td",r,[(0,s._)("div",{style:(0,e.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,s._)("td",null,(0,e.zw)(t.title),1),(0,s._)("td",null,[(0,s._)("del",u,"原價 "+(0,e.zw)(t.origin_price)+" 元",1),(0,s._)("div",p,"現在只要 "+(0,e.zw)(t.price)+" 元",1)]),(0,s._)("td",null,[(0,s._)("div",h,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:o=>W.pushRouter(t.id)},[L.loading?((0,s.wg)(),(0,s.iD)("i",_)):(0,s.kq)("",!0),b],8,g),(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:o=>W.showProductModel(t)},[L.loading?((0,s.wg)(),(0,s.iD)("i",y)):(0,s.kq)("",!0),w],8,m),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",onClick:o=>W.inputCart(t.id)},[L.loading?((0,s.wg)(),(0,s.iD)("i",k)):(0,s.kq)("",!0),f],8,v)])])])))),128))])])]),(0,s.Wm)(Y,{pages:L.pagination,onEmitPages:W.getProducts},null,8,["pages","onEmitPages"]),(0,s._)("div",P,[(0,s._)("div",x,[(0,s._)("div",C,[(0,s._)("div",M,[(0,s._)("h5",q,[(0,s._)("span",null,(0,e.zw)(L.product.title),1)]),z]),(0,s._)("div",D,[(0,s._)("div",j,[(0,s._)("div",$,[(0,s._)("img",{class:"img-fluid",src:L.product.imageUrl,alt:""},null,8,U)]),(0,s._)("div",V,[(0,s._)("span",A,(0,e.zw)(L.product.category),1),(0,s._)("p",null,"商品描述："+(0,e.zw)(L.product.description),1),(0,s._)("p",null,"商品內容："+(0,e.zw)(L.product.content),1),L.product.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",E,(0,e.zw)(L.product.origin_price)+" 元",1)),L.product.price?((0,s.wg)(),(0,s.iD)("del",I,"原價 "+(0,e.zw)(L.product.origin_price)+" 元",1)):(0,s.kq)("",!0),L.product.price?((0,s.wg)(),(0,s.iD)("div",R,"現在只要 "+(0,e.zw)(L.product.price)+" 元",1)):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s._)("div",Z,[H,(0,s.wy)((0,s._)("input",{name:"number",type:"number",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=t=>L.qty=t),min:"1"},null,512),[[a.nr,L.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=t=>W.inputCart(L.product.id,L.qty))}," 加入購物車")])])])])])])])],512)])}var L=l(7424),W=l.n(L),Y=l(9679),B={components:{PagesView:Y.Z},data(){return{products:null,pagination:{total_pages:"3",has_pre:"1"},allProducts:[],loading:!1,loadInput:null,productModal:null,product:{},qty:1}},methods:{getAllProducts(){this.loading=!0,console.log("https://vue3-course-api.hexschool.io/v2/api/ciye-project/products/all"),this.axios.get("https://vue3-course-api.hexschool.io/v2/api/ciye-project/products/all").then((t=>{this.allProducts=t.data.products,console.log(this.allProducts,"asd"),this.loading=!1})).catch((()=>{this.loading=!1}))},getProducts(t=1){this.axios.get(`https://vue3-course-api.hexschool.io/v2/api/ciye-project/products?page=${t}`).then((t=>{console.log(t,"getProducts"),this.allProducts=t.data.products,this.pagination=t.data.pagination,this.loading=!1})).catch((t=>{console.log(t,"getProducts")}))},deleteAllCart(){this.axios.delete("https://vue3-course-api.hexschool.io/v2/api/ciye-project/carts").then((t=>{alert("刪除完成"),console.log(t)})).catch((t=>{console.log(t,"error")}))},inputCart(t,o=1){console.log("asd"),this.loading=!0;const l={data:{product_id:t,qty:o}};this.axios.post("https://vue3-course-api.hexschool.io/v2/api/ciye-project/cart",l).then((t=>{this.loading=!1,console.log(t),alert("新增成功")})).catch((t=>{console.log(t),this.loading=!1}))},showProductModel(t){this.product=t,console.log(this.product),this.productModal.show()},hideModel(){this.productModal.hide()},pushRouter(t){console.log(t),this.$router.push(`/product/${t}`)}},mounted(){console.log(this.$refs.myModal,"this.$refs.myModal"),this.productModal=new(W())(this.$refs.myModal),this.getProducts()}},F=l(3744);const G=(0,F.Z)(B,[["render",K]]);var J=G}}]);
//# sourceMappingURL=568.47b49b7b.js.map