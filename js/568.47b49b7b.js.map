{"version":3,"file":"js/568.47b49b7b.js","mappings":"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","sources":["webpack://new-project/./src/views/ProductsView.vue","webpack://new-project/./src/views/ProductsView.vue?91db"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"mt-4\">\r\n      <table class=\"table align-middle\">\r\n        <thead>\r\n          <tr>\r\n            <th>圖片</th>\r\n            <th>商品名稱</th>\r\n            <th>價格</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"(product, index) in allProducts\" :key=\"index\">\r\n            <td style=\"width: 200px\">\r\n              <div style=\"height: 100px; background-size: cover; background-position: center\"\r\n                :style=\"{backgroundImage: `url(${product.imageUrl})`}\"></div>\r\n            </td>\r\n            <td>\r\n              {{ product.title }}\r\n            </td>\r\n            <td>\r\n              <!-- <div class=\"h5\">{{  }} 元</div> -->\r\n              <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\r\n              <div class=\"h5\">現在只要 {{ product.price }} 元</div>\r\n            </td>\r\n            <td>\r\n              <div class=\"btn-group btn-group-sm\">\r\n                <button type=\"button\" class=\"btn btn-outline-secondary\"\r\n                  @click=\"pushRouter(product.id)\">\r\n                  <i v-if=\"loading\" class=\"fas fa-spinner fa-pulse\"></i>\r\n                  產品細項\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-outline-secondary\"\r\n                  @click=\"showProductModel(product)\">\r\n                  <i v-if=\"loading\" class=\"fas fa-spinner fa-pulse\"></i>\r\n                  查看更多\r\n                </button>\r\n                <button type=\"button\" class=\"btn btn-outline-danger\"\r\n                  @click=\"inputCart(product.id)\">\r\n                  <i v-if=\"loading\" class=\"fas fa-spinner fa-pulse\"></i>\r\n                  加到購物車\r\n                </button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <!-- page -->\r\n    <PagesView :pages=\"pagination\" @emit-pages=\"getProducts\"></PagesView>\r\n    <!-- modal -->\r\n    <div class=\"modal\" tabindex=\"-1\" id=\"myModal\" ref=\"myModal\">\r\n      <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n        <div class=\"modal-content border-0\">\r\n          <div class=\"modal-header bg-dark text-white\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n              <span>{{ product.title }}</span>\r\n            </h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"\r\n              aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-6\">\r\n                <img class=\"img-fluid\" :src=\"product.imageUrl\" alt=\"\">\r\n              </div>\r\n              <div class=\"col-sm-6\">\r\n                <span class=\"badge bg-primary rounded-pill\">{{ product.category }}</span>\r\n                <p>商品描述：{{ product.description }}</p>\r\n                <p>商品內容：{{ product.content }}</p>\r\n                <div class=\"h5\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\r\n                <del class=\"h6\" v-if=\"product.price\">原價 {{ product.origin_price }} 元</del>\r\n                <div class=\"h5\" v-if=\"product.price\">現在只要 {{ product.price }} 元</div>\r\n                <div>\r\n                  <div class=\"input-group\">\r\n                    <label for=\"number\"></label>\r\n                    <input name=\"number\" type=\"number\" class=\"form-control\"\r\n                      v-model.number=\"qty\" min=\"1\">\r\n                    <button type=\"button\" class=\"btn btn-primary\"\r\n                      @click=\"inputCart(product.id, qty)\"\r\n                    >\r\n                      加入購物車</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal';\r\nimport PagesView from '../components/PagesView.vue';\r\n\r\nexport default {\r\n  components: {\r\n    PagesView,\r\n  },\r\n  data() {\r\n    return {\r\n      // table\r\n      products: null,\r\n      pagination: {\r\n        total_pages: '3',\r\n        has_pre: '1',\r\n      },\r\n      allProducts: [],\r\n      loading: false,\r\n      loadInput: null,\r\n      // modal\r\n      productModal: null,\r\n      product: {},\r\n      qty: 1,\r\n    };\r\n  },\r\n  methods: {\r\n    getAllProducts() {\r\n      this.loading = true;\r\n      console.log(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`);\r\n      this.axios.get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`)\r\n        .then((response) => {\r\n          this.allProducts = response.data.products;\r\n          console.log(this.allProducts, 'asd');\r\n          this.loading = false;\r\n        })\r\n        .catch(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    getProducts(page = 1) {\r\n      this.axios.get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products?page=${page}`)\r\n        .then((response) => {\r\n          console.log(response, 'getProducts');\r\n          this.allProducts = response.data.products;\r\n          this.pagination = response.data.pagination;\r\n          this.loading = false;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error, 'getProducts');\r\n        });\r\n    },\r\n    deleteAllCart() {\r\n      this.axios.delete(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`)\r\n        .then((response) => {\r\n          alert('刪除完成');\r\n          console.log(response);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error, 'error');\r\n        });\r\n    },\r\n    inputCart(productId, qtys = 1) {\r\n      console.log('asd');\r\n      this.loading = true;\r\n      const data = {\r\n        data: {\r\n          product_id: productId,\r\n          qty: qtys,\r\n        },\r\n      };\r\n      this.axios.post(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`, data)\r\n        .then((response) => {\r\n          this.loading = false;\r\n          // this.productModal.hide();\r\n          console.log(response);\r\n          alert('新增成功');\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.loading = false;\r\n        });\r\n    },\r\n    showProductModel(product) {\r\n      this.product = product;\r\n      console.log(this.product);\r\n      this.productModal.show();\r\n    },\r\n    // modal\r\n    hideModel() {\r\n      this.productModal.hide();\r\n      // this.deleteModal.hide();\r\n    },\r\n    pushRouter(id) {\r\n      console.log(id);\r\n      this.$router.push(`/product/${id}`);\r\n    },\r\n  },\r\n  mounted() {\r\n    console.log(this.$refs.myModal, 'this.$refs.myModal');\r\n    this.productModal = new Modal(this.$refs.myModal);\r\n    this.getProducts();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n","import { render } from \"./ProductsView.vue?vue&type=template&id=5d8e956d\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\2022 Vue 直播班\\\\新增資料夾 (3)\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","tabindex","id","ref","role","type","for","_createElementBlock","_hoisted_4","_Fragment","_renderList","$data","product","index","key","backgroundImage","imageUrl","_toDisplayString","title","origin_price","price","onClick","$options","_createVNode","_component_PagesView","pages","onEmitPages","_hoisted_23","src","alt","category","description","content","_hoisted_34","name","$event","min","components","PagesView","data","products","pagination","total_pages","has_pre","allProducts","loading","loadInput","productModal","qty","methods","getAllProducts","this","console","log","axios","get","then","response","catch","getProducts","page","error","deleteAllCart","delete","alert","inputCart","productId","qtys","product_id","post","showProductModel","show","hideModel","hide","pushRouter","$router","push","mounted","$refs","myModal","Modal","__exports__","render"],"sourceRoot":""}